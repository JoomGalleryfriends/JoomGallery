<?xml version="1.0"?>
<ruleset name="JoomGallery">
  <description>The JoomGallery PSR-12 exceptions.</description>

  <exclude-pattern type="relative">^docs/*</exclude-pattern>
  <exclude-pattern type="relative">^media/*</exclude-pattern>
  <exclude-pattern type="relative">^node_modules/*</exclude-pattern>
  <exclude-pattern type="relative">^administrator/com_joomgallery/vendor/*</exclude-pattern>
  <exclude-pattern type="relative">^script.php</exclude-pattern>

  <rule ref="PSR12">
    <exclude name="Squiz.ControlStructures.ControlSignature"/>
    <exclude name="PEAR.ControlStructures.ControlSignature"/>
    <exclude name="PSR12.ControlStructures.ControlStructureSpacing"/>
    <exclude name="PSR12.Files.FileHeader"/>
  </rule>

  <!-- clean imports -->
  <rule ref="SlevomatCodingStandard.Namespaces.AlphabeticallySortedUses"/>
  <rule ref="SlevomatCodingStandard.Namespaces.UnusedUses">
    <properties>
      <property name="searchAnnotations" value="true"/>
    </properties>
  </rule>

  <!-- arrays & commas -->
  <rule ref="Squiz.Arrays.ArrayBracketSpacing"/>
  <rule ref="SlevomatCodingStandard.Arrays.TrailingArrayComma"/>

  <!-- operators/alignment -->
  <rule ref="Generic.Formatting.MultipleStatementAlignment">
    <properties>
      <property name="maxPadding" value="50"/>
    </properties>
  </rule>

  <!-- blank line before return/throw/etc -->
  <rule ref="SlevomatCodingStandard.ControlStructures.JumpStatementsSpacing">
    <properties>
    <property name="linesCountBefore" value="1"/>
    <property name="jumpStatements" type="array">
      <element value="return"/>
      <element value="throw"/>
      <element value="break"/>
      <element value="continue"/>
    </property>
  </properties>
  </rule>

  <!-- calls and declarations spacing -->
  <rule ref="PEAR.Functions.FunctionCallSignature"/>
  <rule ref="Squiz.Functions.FunctionDeclarationArgumentSpacing"/>

  <!-- override indentation: 2 spaces, not tabs -->
  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="tabIndent" value="false"/>
      <property name="exact" value="true"/>
    </properties>
  </rule>
  <rule ref="Generic.WhiteSpace.DisallowTabIndent"/>
  <config name="tab_width" value="2"/>

  <!-- apply JoomGallery specific sniffs -->
  <rule ref="JG.ControlStructures.ControlSignature"/>
  <rule ref="JG.Arrays.MultilineArrayFirstElementNewline"/>

  <!-- temporary extend the line length -->
  <rule ref="Generic.Files.LineLength">
    <properties>
      <property name="lineLimit" value="560"/>
      <property name="absoluteLineLimit" value="560"/>
    </properties>
  </rule>

  <rule ref="PSR1.Files.SideEffects.FoundWithSymbols">
    <exclude-pattern type="relative">includes/defines\.php</exclude-pattern>
    <exclude-pattern type="relative">includes/exifarray\.php</exclude-pattern>
    <exclude-pattern type="relative">includes/iptcarray\.php</exclude-pattern>
    <exclude-pattern type="relative">includes/latinbased\.php</exclude-pattern>
    <exclude-pattern type="relative">includes/rules\.php</exclude-pattern>
    <exclude-pattern type="relative">includes/tusspecs\.php</exclude-pattern>
  </rule>
</ruleset>
